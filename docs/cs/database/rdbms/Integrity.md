# 무결성

## 🐣 데이터 무결성?

:::tip

**데이터의 정확성, 일관성이 유지되는 것**

:::

### 🥚 일관성 vs 정확성
- 일관성 : 원인과 결과의 의미가 연속적으로 보장되어 변하지 않는 상태
- 정확성 : 중복이나 누락 없는 상태

### 🥚 무결성 vs 정합성
- 무결성 : 데이터의 정확성, 일관성이 유지되는 것
  - 무결성훼손 : 고객테이블과 주문테이블 모두 고객번호 -1로 가졌으나 고객번호 도메인은 1이상의 값을 가져야한다
- 정합성 : 데이터의 올바른 유무와 무관하게 어떤 데이터들의 값이 서로 일치하는 상태
  - 비정규화를 통해 [Anomaly(이상현상)](./../normalization/DeNormalization.md) 이 발생하면 정합성이 지켜지지 않는
  - 정합성훼손 : 고객테이블은 -1에서 2로 변경했으나, 주문테이블은 고객번호가 변경되지 않았다


##### 데이터 무결성이 깨진다면?

- 테이블에 중복된 데이터 존재
- 부모-자식 테이블 간의 논리적 관계 깨짐
- 트랜잭션별 데이터의 일관성 깨짐
- 등등 잦은 에러와 재개발비용

.

## 🐣 데이터 무결성 제약조건

:::tip

데이터 무결성을 보장하기 위해 저장, 삭제, 수정 등을 제약하는 조건
1. 개체 무결성
2. 참조 무결성
3. 등등

:::

### 🥚 개체 무결성

[기본키](./Key.md)(Primary key) 필드는 Null값 혹은 중복값을 가질 수 없다 (aka **`기본키 제약`**)

### 🥚 참조 무결성

[외래키](./Key.md)(Foreign Key)은 Null이거나 참조하는 릴레이션의 기본키값과 동일해야한다. (aka **`외래키 제약`**)
- 각 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없습니다.
- 두 릴레이션의 일관성을 유지하는데 사용

##### 참조 무결성이 깨지는 예시

- dept 310을 삭제한다면- → 더이상 존재하지 않는 테이블을 참조 → 참조무결성 깨짐

![integrity.png](./img/integrity.png)

### 🥚 도메인 무결성

**필드에 대한 특정 도메인을 정의하고 이에 맞는 데이터가 입력되었는지 확인하는 조건**

- ex. 주민등록번호 필드에 문자가 입력되는 경우엔 도메인의 무결성이 깨졌다고 볼 수 있음
- ex. Null값 허용안함



### 🥚 Null 무결성

테이블의 특정 속성 값이 Null이 될 수 없게 하는 조건

### 🥚 고유(Unique) 무결성

테이블의 특정 속성에 대해 레코드 값들이 유일해야하는 조건

### 🥚 키 무결성

하나의 테이블에는 적어도 하나의 키가 존재해야 하는 조건

### 🥚 관계 무결성

테이블의 어느 한 레코드에 삽입 가능 여부 또는 한 테이블과 다른 테이블의 레코드들 사이의 관계에 대한 적절성 여부를 지정한 조건

.

## 🐣 데이터 무결성 제약조건의 장단점

### 🥚 장점

- 스키마를 정의할 때 무결성 제약조건을 `한 번`만 명시하면, 데이터베이스가 갱신될 때마다 DBMS가 자동으로 제약조건을 검사하므로, 어플리케이션들은 제약조건을 일일이 검사할 필요가 없음
- 응용 프로그램에서 직접 조건을 유지하는 경우보다 에러가 발생할 가능성이 더 낮음
- 무결성 제약조건 덕분에 데이터에 대한 신뢰도가 올라감

### 🥚 단점
- 프로그래밍 작업이 훨씬 복잡해짐
- 무결성 제약조건을 반복해서 구현해야 함
- 무결성 제약조건들 간에 서로 충돌이 발생할 수 있음