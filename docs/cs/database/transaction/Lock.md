# 락

## 🐣 락??
:::tip  
트랜잭션 처리의 순차성을 보장하기 위한 장치

:::
- Lock은 데이터베이스에 여러 사용자들이 같은 데이터를 동시에 접근하는 상황에서, 데이터의 무결성을 지킴

###### *트랜잭션
> ###### DB의 나누어지지 않는 최소한의 처리 단위

.

## 🐣 락의 종류는?
:::tip
- 공유락 (Shared Lock)
- 베타락 (Exclusive Lock)
- 업데이트락 (Update Lock)
- 내재락 (Intent Lock)

:::

### 🥚 공유락 (Shared Lock)

`데이터를 읽을 때 사용되는 Lock` (aka Read Lock)

- 공유락끼리는 동시에 접근이 가능
    - 즉, 하나의 데이터를 읽는 것은 여러 사용자가 동시에 할 수 있음
    - 하지만 공유 Lock이 설정된 데이터에 베타 Lock을 사용할 수는 없음

### 🥚 베타락 (Exclusive Lock)

`데이터를 변경 할 때 사용되는 락` aka Write Lock

- 베타락은 Lock이 해제될 때까지 다른 트랜잭션(읽기 포함)은 해당 리소스에 접근할 수 없음.
- 해당 Lock은 다른 트랜잭션이 수행되고 있는 데이터에 접근하여 동시에 Lock을 설정할 수 없음.
- 트랜잭션이 완료될 때까지 유지

### 🥚 업데이트 락(Update Lock)

`데드락 방지용 락`

- 데이터를 수정하기 위해 베타락(X)을 걸기 전, 데드 락을 방지하기 위해 사용되는 락이다
- 일반적으로 UPDATE 쿼리의 필터(WHERE)가 실행되는 과정에서 적용된다

### 🥚 내재 락(Intent Lock)

`락을 걸수 있는지 여부판단을 위해 거는 락`

- 내재 락은 사용자가 요청한 범위에 대한 락을 걸 수 있는지 여부를 빠르게 파악하기 위해 사용되는 락
- 내재 락은 공유 락과 베타 락 앞에 I 기호를 붙인 IS, IX, SIX 등이 있다